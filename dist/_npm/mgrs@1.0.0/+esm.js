/**
 * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.19.2.
 * Original file: /npm/mgrs@1.0.0/mgrs.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
var t=6,e="AJSAJS",r="AFAFAF",a=65,n=73,o=79,h=86,i=90,s={forward:c,inverse:f,toPoint:u};function c(t,s){return s=s||5,function(t,s){var c="00000"+t.easting,f="00000"+t.northing;return t.zoneNumber+t.zoneLetter+(z=t.easting,w=t.northing,C=t.zoneNumber,p=v(C),S=Math.floor(z/1e5),N=Math.floor(w/1e5)%20,u=S,l=N,M=p,b=M-1,g=e.charCodeAt(b),d=r.charCodeAt(b),k=g+u-1,m=d+l,A=!1,k>i&&(k=k-i+a-1,A=!0),(k===n||g<n&&k>n||(k>n||g<n)&&A)&&k++,(k===o||g<o&&k>o||(k>o||g<o)&&A)&&++k===n&&k++,k>i&&(k=k-i+a-1),m>h?(m=m-h+a-1,A=!0):A=!1,(m===n||d<n&&m>n||(m>n||d<n)&&A)&&m++,(m===o||d<o&&m>o||(m>o||d<o)&&A)&&++m===n&&m++,m>h&&(m=m-h+a-1),String.fromCharCode(k)+String.fromCharCode(m))+c.substr(c.length-5,s)+f.substr(f.length-5,s);var u,l,M,b,g,d,k,m,A;var z,w,C,p,S,N}(function(t){var e,r,a,n,o,h,i,s,c=t.lat,f=t.lon,u=6378137,M=.00669438,b=.9996,v=l(c),d=l(f);s=Math.floor((f+180)/6)+1,180===f&&(s=60);c>=56&&c<64&&f>=3&&f<12&&(s=32);c>=72&&c<84&&(f>=0&&f<9?s=31:f>=9&&f<21?s=33:f>=21&&f<33?s=35:f>=33&&f<42&&(s=37));i=l(6*(s-1)-180+3),e=M/(1-M),r=u/Math.sqrt(1-M*Math.sin(v)*Math.sin(v)),a=Math.tan(v)*Math.tan(v),n=e*Math.cos(v)*Math.cos(v),o=Math.cos(v)*(d-i),h=u*((1-M/4-3*M*M/64-5*M*M*M/256)*v-(3*M/8+3*M*M/32+45*M*M*M/1024)*Math.sin(2*v)+(15*M*M/256+45*M*M*M/1024)*Math.sin(4*v)-35*M*M*M/3072*Math.sin(6*v));var k=b*r*(o+(1-a+n)*o*o*o/6+(5-18*a+a*a+72*n-58*e)*o*o*o*o*o/120)+5e5,m=b*(h+r*Math.tan(v)*(o*o/2+(5-a+9*n+4*n*n)*o*o*o*o/24+(61-58*a+a*a+600*n-330*e)*o*o*o*o*o*o/720));c<0&&(m+=1e7);return{northing:Math.round(m),easting:Math.round(k),zoneNumber:s,zoneLetter:g(c)}}({lat:t[1],lon:t[0]}),s)}function f(t){var e=b(d(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function u(t){var e=b(d(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function l(t){return t*(Math.PI/180)}function M(t){return t/Math.PI*180}function b(t){var e=t.northing,r=t.easting,a=t.zoneLetter,n=t.zoneNumber;if(n<0||n>60)return null;var o,h,i,s,c,f,u,l,g,v=.9996,d=6378137,k=.00669438,m=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),A=r-5e5,z=e;a<"N"&&(z-=1e7),u=6*(n-1)-180+3,o=.006739496752268451,g=(l=z/v/6367449.145945056)+(3*m/2-27*m*m*m/32)*Math.sin(2*l)+(21*m*m/16-55*m*m*m*m/32)*Math.sin(4*l)+151*m*m*m/96*Math.sin(6*l),h=d/Math.sqrt(1-k*Math.sin(g)*Math.sin(g)),i=Math.tan(g)*Math.tan(g),s=o*Math.cos(g)*Math.cos(g),c=.99330562*d/Math.pow(1-k*Math.sin(g)*Math.sin(g),1.5),f=A/(h*v);var w=g-h*Math.tan(g)/c*(f*f/2-(5+3*i+10*s-4*s*s-9*o)*f*f*f*f/24+(61+90*i+298*s+45*i*i-1.6983531815716497-3*s*s)*f*f*f*f*f*f/720);w=M(w);var C,p=(f-(1+2*i+s)*f*f*f/6+(5-2*s+28*i-3*s*s+8*o+24*i*i)*f*f*f*f*f/120)/Math.cos(g);if(p=u+M(p),t.accuracy){var S=b({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});C={top:S.lat,right:S.lon,bottom:w,left:p}}else C={lat:w,lon:p};return C}function g(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function v(e){var r=e%t;return 0===r&&(r=t),r}function d(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var s,c=t.length,f=null,u="",l=0;!/[A-Z]/.test(s=t.charAt(l));){if(l>=2)throw"MGRSPoint bad conversion from: "+t;u+=s,l++}var M=parseInt(u,10);if(0===l||l+3>c)throw"MGRSPoint bad conversion from: "+t;var b=t.charAt(l++);if(b<="A"||"B"===b||"Y"===b||b>="Z"||"I"===b||"O"===b)throw"MGRSPoint zone letter "+b+" not handled: "+t;f=t.substring(l,l+=2);for(var g=v(M),d=function(t,r){var h=e.charCodeAt(r-1),s=1e5,c=!1;for(;h!==t.charCodeAt(0);){if(++h===n&&h++,h===o&&h++,h>i){if(c)throw"Bad character: "+t;h=a,c=!0}s+=1e5}return s}(f.charAt(0),g),m=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;var i=r.charCodeAt(e-1),s=0,c=!1;for(;i!==t.charCodeAt(0);){if(++i===n&&i++,i===o&&i++,i>h){if(c)throw"Bad character: "+t;i=a,c=!0}s+=1e5}return s}(f.charAt(1),g);m<k(b);)m+=2e6;var A=c-l;if(A%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var z,w,C,p=A/2,S=0,N=0;return p>0&&(z=1e5/Math.pow(10,p),w=t.substring(l,l+p),S=parseFloat(w)*z,C=t.substring(l+p),N=parseFloat(C)*z),{easting:S+d,northing:N+m,zoneLetter:b,zoneNumber:M,accuracy:z}}function k(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}export{s as default,c as forward,f as inverse,u as toPoint};
