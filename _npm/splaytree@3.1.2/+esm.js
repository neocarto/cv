/**
 * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.19.2.
 * Original file: /npm/splaytree@3.1.2/dist/splay.esm.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
/**
 * splaytree v3.1.2
 * Fast Splay tree for Node and browser
 *
 * @author Alexander Milevski <info@w8r.name>
 * @license MIT
 * @preserve
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
function t(t,r){var e,o,n,i,l={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return i={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function u(i){return function(u){return function(i){if(e)throw new TypeError("Generator is already executing.");for(;l;)try{if(e=1,o&&(n=2&i[0]?o.return:i[0]?o.throw||((n=o.return)&&n.call(o),0):o.next)&&!(n=n.call(o,i[1])).done)return n;switch(o=0,n&&(i=[2&i[0],n.value]),i[0]){case 0:case 1:n=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,o=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!(n=l.trys,(n=n.length>0&&n[n.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!n||i[1]>n[0]&&i[1]<n[3])){l.label=i[1];break}if(6===i[0]&&l.label<n[1]){l.label=n[1],n=i;break}if(n&&l.label<n[2]){l.label=n[2],l.ops.push(i);break}n[2]&&l.ops.pop(),l.trys.pop();continue}i=r.call(t,l)}catch(t){i=[6,t],o=0}finally{e=n=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}var r=function(t,r){this.next=null,this.key=t,this.data=r,this.left=null,this.right=null};function e(t,r){return t>r?1:t<r?-1:0}function o(t,e,o){for(var n=new r(null,null),i=n,l=n;;){var u=o(t,e.key);if(u<0){if(null===e.left)break;if(o(t,e.left.key)<0){var f=e.left;if(e.left=f.right,f.right=e,null===(e=f).left)break}l.left=e,l=e,e=e.left}else{if(!(u>0))break;if(null===e.right)break;if(o(t,e.right.key)>0){f=e.right;if(e.right=f.left,f.left=e,null===(e=f).right)break}i.right=e,i=e,e=e.right}}return i.right=e.left,l.left=e.right,e.left=n.right,e.right=n.left,e}function n(t,e,n,i){var l=new r(t,e);if(null===n)return l.left=l.right=null,l;var u=i(t,(n=o(t,n,i)).key);return u<0?(l.left=n.left,l.right=n,n.left=null):u>=0&&(l.right=n.right,l.left=n,n.right=null),l}function i(t,r,e){var n=null,i=null;if(r){var l=e((r=o(t,r,e)).key,t);0===l?(n=r.left,i=r.right):l<0?(i=r.right,r.right=null,n=r):(n=r.left,r.left=null,i=r)}return{left:n,right:i}}function l(t,r,e,o,n){if(t){o(r+(e?"└── ":"├── ")+n(t)+"\n");var i=r+(e?"    ":"│   ");t.left&&l(t.left,i,!1,o,n),t.right&&l(t.right,i,!0,o,n)}}var u=function(){function u(t){void 0===t&&(t=e),this._root=null,this._size=0,this._comparator=t}return u.prototype.insert=function(t,r){return this._size++,this._root=n(t,r,this._root,this._comparator)},u.prototype.add=function(t,e){var n=new r(t,e);null===this._root&&(n.left=n.right=null,this._size++,this._root=n);var i=this._comparator,l=o(t,this._root,i),u=i(t,l.key);return 0===u?this._root=l:(u<0?(n.left=l.left,n.right=l,l.left=null):u>0&&(n.right=l.right,n.left=l,l.right=null),this._size++,this._root=n),this._root},u.prototype.remove=function(t){this._root=this._remove(t,this._root,this._comparator)},u.prototype._remove=function(t,r,e){var n;return null===r?null:0===e(t,(r=o(t,r,e)).key)?(null===r.left?n=r.right:(n=o(t,r.left,e)).right=r.right,this._size--,n):r},u.prototype.pop=function(){var t=this._root;if(t){for(;t.left;)t=t.left;return this._root=o(t.key,this._root,this._comparator),this._root=this._remove(t.key,this._root,this._comparator),{key:t.key,data:t.data}}return null},u.prototype.findStatic=function(t){for(var r=this._root,e=this._comparator;r;){var o=e(t,r.key);if(0===o)return r;r=o<0?r.left:r.right}return null},u.prototype.find=function(t){return this._root&&(this._root=o(t,this._root,this._comparator),0!==this._comparator(t,this._root.key))?null:this._root},u.prototype.contains=function(t){for(var r=this._root,e=this._comparator;r;){var o=e(t,r.key);if(0===o)return!0;r=o<0?r.left:r.right}return!1},u.prototype.forEach=function(t,r){for(var e=this._root,o=[],n=!1;!n;)null!==e?(o.push(e),e=e.left):0!==o.length?(e=o.pop(),t.call(r,e),e=e.right):n=!0;return this},u.prototype.range=function(t,r,e,o){for(var n=[],i=this._comparator,l=this._root;0!==n.length||l;)if(l)n.push(l),l=l.left;else{if(i((l=n.pop()).key,r)>0)break;if(i(l.key,t)>=0&&e.call(o,l))return this;l=l.right}return this},u.prototype.keys=function(){var t=[];return this.forEach((function(r){var e=r.key;return t.push(e)})),t},u.prototype.values=function(){var t=[];return this.forEach((function(r){var e=r.data;return t.push(e)})),t},u.prototype.min=function(){return this._root?this.minNode(this._root).key:null},u.prototype.max=function(){return this._root?this.maxNode(this._root).key:null},u.prototype.minNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.left;)t=t.left;return t},u.prototype.maxNode=function(t){if(void 0===t&&(t=this._root),t)for(;t.right;)t=t.right;return t},u.prototype.at=function(t){for(var r=this._root,e=!1,o=0,n=[];!e;)if(r)n.push(r),r=r.left;else if(n.length>0){if(r=n.pop(),o===t)return r;o++,r=r.right}else e=!0;return null},u.prototype.next=function(t){var r=this._root,e=null;if(t.right){for(e=t.right;e.left;)e=e.left;return e}for(var o=this._comparator;r;){var n=o(t.key,r.key);if(0===n)break;n<0?(e=r,r=r.left):r=r.right}return e},u.prototype.prev=function(t){var r=this._root,e=null;if(null!==t.left){for(e=t.left;e.right;)e=e.right;return e}for(var o=this._comparator;r;){var n=o(t.key,r.key);if(0===n)break;n<0?r=r.left:(e=r,r=r.right)}return e},u.prototype.clear=function(){return this._root=null,this._size=0,this},u.prototype.toList=function(){return function(t){var e=t,o=[],n=!1,i=new r(null,null),l=i;for(;!n;)e?(o.push(e),e=e.left):o.length>0?e=(e=l=l.next=o.pop()).right:n=!0;return l.next=null,i.next}(this._root)},u.prototype.load=function(t,e,o){void 0===e&&(e=[]),void 0===o&&(o=!1);var n=t.length,i=this._comparator;if(o&&a(t,e,0,n-1,i),null===this._root)this._root=f(t,e,0,n),this._size=n;else{var l=function(t,e,o){var n=new r(null,null),i=n,l=t,u=e;for(;null!==l&&null!==u;)o(l.key,u.key)<0?(i.next=l,l=l.next):(i.next=u,u=u.next),i=i.next;null!==l?i.next=l:null!==u&&(i.next=u);return n.next}(this.toList(),function(t,e){for(var o=new r(null,null),n=o,i=0;i<t.length;i++)n=n.next=new r(t[i],e[i]);return n.next=null,o.next}(t,e),i);n=this._size+n,this._root=h({head:l},0,n)}return this},u.prototype.isEmpty=function(){return null===this._root},Object.defineProperty(u.prototype,"size",{get:function(){return this._size},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"root",{get:function(){return this._root},enumerable:!0,configurable:!0}),u.prototype.toString=function(t){void 0===t&&(t=function(t){return String(t.key)});var r=[];return l(this._root,"",!0,(function(t){return r.push(t)}),t),r.join("")},u.prototype.update=function(t,r,e){var l=this._comparator,u=i(t,this._root,l),f=u.left,h=u.right;l(t,r)<0?h=n(r,e,h,l):f=n(r,e,f,l),this._root=function(t,r,e){return null===r?t:(null===t||((r=o(t.key,r,e)).left=t),r)}(f,h,l)},u.prototype.split=function(t){return i(t,this._root,this._comparator)},u.prototype[Symbol.iterator]=function(){var r,e,o;return t(this,(function(t){switch(t.label){case 0:r=this._root,e=[],o=!1,t.label=1;case 1:return o?[3,6]:null===r?[3,2]:(e.push(r),r=r.left,[3,5]);case 2:return 0===e.length?[3,4]:[4,r=e.pop()];case 3:return t.sent(),r=r.right,[3,5];case 4:o=!0,t.label=5;case 5:return[3,1];case 6:return[2]}}))},u}();function f(t,e,o,n){var i=n-o;if(i>0){var l=o+Math.floor(i/2),u=t[l],h=e[l],a=new r(u,h);return a.left=f(t,e,o,l),a.right=f(t,e,l+1,n),a}return null}function h(t,r,e){var o=e-r;if(o>0){var n=r+Math.floor(o/2),i=h(t,r,n),l=t.head;return l.left=i,t.head=t.head.next,l.right=h(t,n+1,e),l}return null}function a(t,r,e,o,n){if(!(e>=o)){for(var i=t[e+o>>1],l=e-1,u=o+1;;){do{l++}while(n(t[l],i)<0);do{u--}while(n(t[u],i)>0);if(l>=u)break;var f=t[l];t[l]=t[u],t[u]=f,f=r[l],r[l]=r[u],r[u]=f}a(t,r,e,u,n),a(t,r,u+1,o,n)}}export{u as default};
