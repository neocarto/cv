/**
 * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.19.2.
 * Original file: /npm/topojson-simplify@3.0.3/src/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import{feature as r,transform as n}from"../topojson-client@3.1.0/+esm.js";function t(r,n){var t,u=r.objects,c={};function i(r){var n,t;switch(r.type){case"Polygon":n=(t=l(r.arcs))?{type:"Polygon",arcs:t}:{type:null};break;case"MultiPolygon":n=(t=r.arcs.map(l).filter(o)).length?{type:"MultiPolygon",arcs:t}:{type:null};break;case"GeometryCollection":n=(t=r.geometries.map(i).filter(a)).length?{type:"GeometryCollection",geometries:t}:{type:null};break;default:return r}return null!=r.id&&(n.id=r.id),null!=r.bbox&&(n.bbox=r.bbox),null!=r.properties&&(n.properties=r.properties),n}function l(r){return r.length&&(t=r[0],n(t,!1))?[r[0]].concat(r.slice(1).filter(s)):null;var t}function s(r){return n(r,!0)}for(t in null==n&&(n=e),u)c[t]=i(u[t]);return function(r){var n,t,e=r.objects,o={},a=r.arcs,u=a.length,c=-1,i=new Array(u),l=0,s=-1;function f(r){switch(r.type){case"GeometryCollection":r.geometries.forEach(f);break;case"LineString":b(r.arcs);break;case"MultiLineString":case"Polygon":r.arcs.forEach(b);break;case"MultiPolygon":r.arcs.forEach(y)}}function p(r){r<0&&(r=~r),i[r]||(i[r]=1,++l)}function b(r){r.forEach(p)}function y(r){r.forEach(b)}function g(r){var n;switch(r.type){case"GeometryCollection":n={type:"GeometryCollection",geometries:r.geometries.map(g)};break;case"LineString":n={type:"LineString",arcs:m(r.arcs)};break;case"MultiLineString":n={type:"MultiLineString",arcs:r.arcs.map(m)};break;case"Polygon":n={type:"Polygon",arcs:r.arcs.map(m)};break;case"MultiPolygon":n={type:"MultiPolygon",arcs:r.arcs.map(v)};break;default:return r}return null!=r.id&&(n.id=r.id),null!=r.bbox&&(n.bbox=r.bbox),null!=r.properties&&(n.properties=r.properties),n}function h(r){return r<0?~i[~r]:i[r]}function m(r){return r.map(h)}function v(r){return r.map(m)}for(t in e)f(e[t]);for(n=new Array(l);++c<u;)i[c]&&(i[c]=++s,n[s]=a[c]);for(t in e)o[t]=g(e[t]);return{type:"Topology",bbox:r.bbox,transform:r.transform,objects:o,arcs:n}}({type:"Topology",bbox:r.bbox,transform:r.transform,objects:c,arcs:r.arcs})}function e(){return!0}function o(r){return r}function a(r){return null!=r.type}function u(r){var n,t=new Array(r.arcs.length),e=0;function o(r){switch(r.type){case"GeometryCollection":r.geometries.forEach(o);break;case"Polygon":a(r.arcs);break;case"MultiPolygon":r.arcs.forEach(a)}}function a(r){for(var n=0,o=r.length;n<o;++n,++e)for(var a=r[n],u=0,c=a.length;u<c;++u){var i=a[u];i<0&&(i=~i);var l=t[i];null==l?t[i]=e:l!==e&&(t[i]=-1)}}for(n in r.objects)o(r.objects[n]);return function(r){for(var n,e=0,o=r.length;e<o;++e)if(-1===t[(n=r[e])<0?~n:n])return!0;return!1}}function c(r){var n=r[0],t=r[1],e=r[2];return Math.abs((n[0]-e[0])*(t[1]-n[1])-(n[0]-t[0])*(e[1]-n[1]))/2}function i(r){for(var n,t=-1,e=r.length,o=r[e-1],a=0;++t<e;)n=o,o=r[t],a+=n[0]*o[1]-n[1]*o[0];return Math.abs(a)/2}function l(n,t,e){return t=null==t?Number.MIN_VALUE:+t,null==e&&(e=i),function(o,a){return e(r(n,{type:"Polygon",arcs:[o]}).geometry.coordinates[0],a)>=t}}function s(r,n,t){var e=u(r),o=l(r,n,t);return function(r,n){return e(r,n)||o(r,n)}}function f(r,n){return r[1][2]-n[1][2]}function p(r){return[r[0],r[1],0]}function b(r,t){var e=r.transform?n(r.transform):p,o=function(){var r={},n=[],t=0;function e(r,t){for(;t>0;){var e=(t+1>>1)-1,o=n[e];if(f(r,o)>=0)break;n[o._=t]=o,n[r._=t=e]=r}}function o(r,e){for(;;){var o=e+1<<1,a=o-1,u=e,c=n[u];if(a<t&&f(n[a],c)<0&&(c=n[u=a]),o<t&&f(n[o],c)<0&&(c=n[u=o]),u===e)break;n[c._=e]=c,n[r._=e=u]=r}}return r.push=function(r){return e(n[r._=t]=r,t++),t},r.pop=function(){if(!(t<=0)){var r,e=n[0];return--t>0&&(r=n[t],o(n[r._=0]=r,0)),e}},r.remove=function(r){var a,u=r._;if(n[u]===r)return u!==--t&&(f(a=n[t],r)<0?e:o)(n[a._=u]=a,u),u},r}();null==t&&(t=c);var a=r.arcs.map((function(r){var n,a,c,i=[],l=0;for(a=1,c=(r=r.map(e)).length-1;a<c;++a)(n=[r[a-1],r[a],r[a+1]])[1][2]=t(n),i.push(n),o.push(n);for(r[0][2]=r[c][2]=1/0,a=0,c=i.length;a<c;++a)(n=i[a]).previous=i[a-1],n.next=i[a+1];for(;n=o.pop();){var s=n.previous,f=n.next;n[1][2]<l?n[1][2]=l:l=n[1][2],s&&(s.next=f,s[2]=n[2],u(s)),f&&(f.previous=s,f[0]=n[0],u(f))}return r}));function u(r){o.remove(r),r[1][2]=t(r),o.push(r)}return{type:"Topology",bbox:r.bbox,objects:r.objects,arcs:a}}function y(r,n){var t=[];return r.arcs.forEach((function(r){r.forEach((function(r){isFinite(r[2])&&t.push(r[2])}))})),t.length&&function(r,n){if(!(t=r.length))return;if((n=+n)<=0||t<2)return r[0];if(n>=1)return r[t-1];var t,e=(t-1)*n,o=Math.floor(e),a=r[o],u=r[o+1];return a+(u-a)*(e-o)}(t.sort(g),n)}function g(r,n){return n-r}function h(r,n){n=null==n?Number.MIN_VALUE:+n;var t=r.arcs.map((function(r){for(var t,e=-1,o=0,a=r.length,u=new Array(a);++e<a;)(t=r[e])[2]>=n&&(u[o++]=[t[0],t[1]]);return u.length=o,u}));return{type:"Topology",transform:r.transform,bbox:r.bbox,objects:r.objects,arcs:t}}var m=Math.PI,v=2*m,x=m/4,M=m/180,k=Math.abs,P=Math.atan2,j=Math.cos,E=Math.sin;function d(r,n){for(var t,e,o=0,a=r.length,u=0,c=r[n?o++:a-1],i=c[0]*M,l=c[1]*M/2+x,s=j(l),f=E(l);o<a;++o){t=i,i=(c=r[o])[0]*M,l=c[1]*M/2+x,e=s,s=j(l);var p=i-t,b=p>=0?1:-1,y=b*p,g=f*(f=E(l)),h=e*s+g*j(y),m=g*b*E(y);u+=P(m,h)}return u}function _(r,n){var t=d(r,!0);return n&&(t*=-1),2*(t<0?v+t:t)}function w(r){return 2*k(d(r,!1))}export{t as filter,u as filterAttached,s as filterAttachedWeight,l as filterWeight,i as planarRingArea,c as planarTriangleArea,b as presimplify,y as quantile,h as simplify,_ as sphericalRingArea,w as sphericalTriangleArea};export default null;
