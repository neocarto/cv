/**
 * Bundled by jsDelivr using Rollup v2.79.1 and Terser v5.19.2.
 * Original file: /npm/statsbreaks@0.1.4/src/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import*as t from"../d3-array@3.2.4/+esm.js";import*as e from"../d3-selection@3.0.0/+esm.js";import*as n from"../d3-scale@4.0.2/+esm.js";import*as r from"../d3-shape@3.2.0/+esm.js";function a(t,e){let n;return e>=0&&(n=+t.toFixed(e)),e<0&&(n=Math.round(t/+(1+"0".repeat(Math.abs(e))))*+(1+"0".repeat(Math.abs(e)))),n}const l=Object.assign({},t);function i(t){if(6>(t=t.filter((t=>""!=t)).map((t=>+t))).length)return null;return[l.quantile(t,0),l.quantile(t,.05),l.quantile(t,.25),l.quantile(t,.5),l.quantile(t,.75),l.quantile(t,.95),l.quantile(t,1)]}const s=Object.assign({},t);function o(t,e){if(e>(t=t.filter((t=>""!=t)).map((t=>+t))).length)return null;const n=[],r=1/e;for(let a=0;a<=e;a++)n.push(s.quantile(t,r*a));return n}const u=Object.assign({},t);function c(t,e){if(e>(t=t.filter((t=>""!=t)).map((t=>+t))).length)return null;const n=[u.min(t),u.max(t)],r=(n[1]-n[0])/e;let a=n[0];for(let t=0;t<e-1;t++)n.push(a+r),a+=r;return n.sort(u.ascending)}function h(t,e){if(e>(t=t.filter((t=>""!=t)).map((t=>+t)).sort((function(t,e){return t-e}))).length)return null;let n=function(t,e){let n,r,a=[],l=[],i=0;for(n=0;n<t.length+1;n++){let t=[],n=[];for(r=0;r<e+1;r++)t.push(0),n.push(0);a.push(t),l.push(n)}for(n=1;n<e+1;n++)for(a[1][n]=1,l[1][n]=0,r=2;r<t.length+1;r++)l[r][n]=1/0;for(let n=2;n<t.length+1;n++){let s=0,o=0,u=0,c=0;for(let h=1;h<n+1;h++){let f=n-h+1,m=t[f-1];if(u++,s+=m,o+=m*m,i=o-s*s/u,c=f-1,0!==c)for(r=2;r<e+1;r++)l[n][r]>=i+l[c][r-1]&&(a[n][r]=f,l[n][r]=i+l[c][r-1])}a[n][1]=1,l[n][1]=i}return{lower_class_limits:a,variance_combinations:l}}(t,e);return function(t,e,n){let r=t.length-1,a=[],l=n;for(a[n]=t[t.length-1],a[0]=t[0];l>1;)a[l-1]=t[e[r][l]-2],r=e[r][l]-1,l--;return a}(t,n.lower_class_limits,e)}function f({values:t,method:e,nb:n,precision:r}){let l;switch(e){case"q6":l=i(t);break;case"quantile":l=o(t,n);break;case"equal":l=c(t,n);break;case"jenks":l=h(t,n)}return Number.isInteger(+r)?l.map((t=>a(t,r))):l}const m=Object.assign({},t,e,n,r);function p(t,e=25,n=!0,r=!1){t=t.filter((t=>""!=t)).map((t=>+t)).sort(m.ascending),1==r&&(t=t.map((t=>Math.log(t))).filter((t=>t!=-1/0)).filter((t=>t!=1/0)));const a=1e3,l=200,i=c(t,e),s=i[1]-i[0],o=[];for(let e=0;e<i.length-1;e++){const n=i[0]+s/2+e*s,r=t.filter((t=>t>=i[e]&&t<=i[e+1])).length;o.push({x:n,y:r})}const u=m.scaleLinear().domain([m.min(t),m.max(t)]).range([10,990]),h=m.scaleLinear().domain([m.max(o.map((t=>t.y))),0]).range([10,180]),f=m.create("svg").attr("width",a).attr("height",l).attr("viewBox",[0,0,a,l]).attr("style","max-width: 100%; height: auto; height: intrinsic; background-color: white;"),p=m.line().x((t=>u(t.x))).y((t=>h(t.y))).curve(m.curveBasis);return f.append("path").datum(o).attr("d",p).attr("stroke","#d14173").attr("stroke-width",2).attr("fill","none"),1==n&&f.append("g").attr("fill","white").attr("stroke","#d14173").selectAll("path").data(o).join("path").attr("d",m.symbol().size(25).type(m.symbols[0])).attr("transform",(t=>`translate(\n       ${u(t.x)},\n       ${h(t.y)})`)),f.append("g").attr("stroke","black").selectAll("line").data(t).join("line").attr("x1",(t=>u(t))).attr("y1",l).attr("x2",(t=>u(t))).attr("y2",190),f.node()}const d=Object.assign({},t,e,n,r);function g(t,e=null,n=null){const r=1e3;let a=null==n?25:40;const l=d.create("svg").attr("width",r).attr("height",a).attr("viewBox",[0,0,r,a]).attr("style","max-width: 100%; height: auto; height: intrinsic; background-color: white;"),i=d.scaleLinear().domain([d.min(t),d.max(t)]).range([10,990]);null!=n&&(n=n.filter((t=>""!=t)).map((t=>+t)).sort(d.ascending),l.append("g").attr("stroke","black").selectAll("line").data(n).join("line").attr("x1",(t=>i(t))).attr("y1",a).attr("x2",(t=>i(t))).attr("y2",a-10));for(let r=0;r<=t.length-1;r++)l.append("rect").attr("x",i(t[r])).attr("y",0).attr("width",i(t[r+1]-t[r])).attr("height",null===n?a:a-15).attr("fill",null===e?"#d14173":e[r]).attr("stroke","white").attr("stroke-width",1.5);return l.node()}export{f as breaks,c as equal,h as jenks,i as q6,o as quantile,a as rounding,p as shape,g as view};export default null;
